# Airtruct Docker Compose Configuration
# Copy this file to .env and configure your settings
#
# To enable optional services, use docker-compose profiles:
#   docker-compose up -d                    # Start coordinator and workers only
#   docker-compose --profile postgres up -d # Include PostgreSQL
#   docker-compose --profile keycloak up -d # Include Keycloak
#   docker-compose --profile postgres --profile keycloak up -d # Include both

# ====================
# General Configuration
# ====================

ROLE=coordinator
HTTP_PORT=8080
GRPC_PORT=50000
DISCOVERY_URI=coordinator:50000
DEBUG_MODE=false

# ====================
# Database Configuration
# ====================

# SQLite (default)
DATABASE_DRIVER=sqlite
DATABASE_URI=file:/airtruct.sqlite?_foreign_keys=1&mode=rwc

# PostgreSQL (uncomment to use)
# DATABASE_DRIVER=postgres
# DATABASE_URI=postgres://airtruct:airtruct@postgres:5432/airtruct?sslmode=disable

# PostgreSQL Service Configuration
POSTGRES_USER=airtruct
POSTGRES_PASSWORD=airtruct
POSTGRES_DB=airtruct

# ====================
# Secret Configuration
# ====================

# Secret key for encryption (must be exactly 32 bytes)
SECRET_KEY=this_is_a_32_byte_key_for_AES!!!

# ====================
# Authentication Configuration
# ====================

# Authentication type: none, basic, or oauth2
AUTH_TYPE=none

# --------------------
# Basic Authentication
# --------------------

# Uncomment to enable basic auth
# AUTH_BASIC_USERNAME=airtruct
# AUTH_BASIC_PASSWORD=password

# --------------------
# OAuth2 Authentication
# --------------------

# Uncomment to enable OAuth2 (requires --profile keycloak)
# AUTH_OAUTH2_CLIENT_ID=airtruct
# AUTH_OAUTH2_CLIENT_SECRET=airtruct-secret-change-in-production
# AUTH_OAUTH2_AUTHORIZATION_URL=http://localhost:8090/realms/airtruct/protocol/openid-connect/auth
# AUTH_OAUTH2_TOKEN_URL=http://keycloak:8080/realms/airtruct/protocol/openid-connect/token
# AUTH_OAUTH2_REDIRECT_URL=http://localhost:8080/auth/callback
# AUTH_OAUTH2_SCOPES=openid,email,profile
# AUTH_OAUTH2_USER_INFO_URL=http://keycloak:8080/realms/airtruct/protocol/openid-connect/userinfo
# AUTH_OAUTH2_SESSION_SECRET=change-this-to-random-32-char-secret

# ====================
# Keycloak Configuration (only needed if using --profile keycloak)
# ====================

KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin
KC_DB=dev-file
KC_HOSTNAME=localhost
KC_HOSTNAME_PORT=8090
KC_HOSTNAME_STRICT=false
KC_HTTP_ENABLED=true

# ====================
# Worker Configuration
# ====================

WORKER_GRPC_PORT=50001
